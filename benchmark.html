<html>
<script type='text/javascript' src='linkedlist.js'></script>
<script type='text/javascript'>
  var n = 100000;

  var arr;
  var ll;

  var arrObjPool;
  var arrRemoveOrder;
  var llObjPool;
  var llRemoveOrder;
  var timestamp;

  var numArrPopulates     = 0; var avgArrPopulate     = 0;
  var numLLPopulates      = 0; var avgLLPopulate      = 0;
  var numArrRandomRemoves = 0; var avgArrRandomRemove = 0;
  var numLLRandomRemoves  = 0; var avgLLRandomRemove  = 0;

  function load()
  {
    setup();
    resetAll();
  }

  function setup()
  {
    arrObjPool = [];
    arrRemoveOrder = [];
    llObjPool = [];
    llRemoveOrder = [];
    for(var i = 0; i < n; i++)
    {
      arrObjPool.push({"id":i});
      llObjPool.push({"id":i});
      llRemoveOrder.push(i);
    }

    var randI;
    var temp;
    for(var i = 0; i < n; i++)
    {
      randI = Math.floor(Math.random()*(n-i));
      temp = llRemoveOrder[i];
      llRemoveOrder[i] = llRemoveOrder[randI+i];
      llRemoveOrder[randI+i] = temp;

      arrRemoveOrder.push(randI);
    }
  }

  function resetAll() { resetArr(); resetLL(); }
  function resetArr() { arr = []; }
  function resetLL() { ll = new LinkedList("BENCHMARK_LL"); }

  function runFullSuite()
  {
    resetAll();
    arrPopulate();
    llPopulate();
  } 

  function arrPopulate()
  {
    resetArr();
    timestamp = Date.now();
    for(var i = 0; i < n; i++)
      arr.push(arrObjPool[i]);
    timestamp = Date.now()-timestamp;
    avgArrPopulate = ((numArrPopulates*avgArrPopulate)+timestamp)/(numArrPopulates+1);
    numArrPopulates++;
    document.getElementById("arr_populate_duration").innerHTML = timestamp;
    document.getElementById("arr_populate_avg").innerHTML = avgArrPopulate;
  }

  function llPopulate()
  {
    resetLL();
    timestamp = Date.now();
    for(var i = 0; i < n; i++)
      ll.add(llObjPool[i]);
    timestamp = Date.now()-timestamp;
    avgLLPopulate = ((numLLPopulates*avgLLPopulate)+timestamp)/(numLLPopulates+1);
    numLLPopulates++;
    document.getElementById("ll_populate_duration").innerHTML = timestamp;
    document.getElementById("ll_populate_avg").innerHTML = avgLLPopulate;
  }

  function arrRandomRemove()
  {
    if(arr.length == 0) arrPopulate();

    timestamp = Date.now();
    for(var i = 0; i < n; i++)
      arr.splice(arrRemoveOrder[i],1);
    timestamp = Date.now()-timestamp;
    avgArrRandomRemove = ((numArrRandomRemoves*avgArrRandomRemove)+timestamp)/(numArrRandomRemoves+1);
    numArrRandomRemoves++;
    document.getElementById("arr_randomremove_duration").innerHTML = timestamp;
    document.getElementById("arr_randomremove_avg").innerHTML = avgArrRandomRemove;
  }

  function llRandomRemove()
  {
    if(ll.firstMember() == null) llPopulate();

    timestamp = Date.now();
    for(var i = 0; i < n; i++)
      ll.remove(llObjPool[llRemoveOrder[i]]);
    timestamp = Date.now()-timestamp;
    avgLLRandomRemove = ((numLLRandomRemoves*avgLLRandomRemove)+timestamp)/(numLLRandomRemoves+1);
    numLLRandomRemoves++;
    document.getElementById("ll_randomremove_duration").innerHTML = timestamp;
    document.getElementById("ll_randomremove_avg").innerHTML = avgLLRandomRemove;
  }

</script>
<body onload="load();">
<button type="button" onclick="resetAll();">Reset</button>
<button type="button" onclick="runFullSuite();">Run All</button><br /><br />
<table cellpadding="10" border="1">
  <tr> <td></td> <td colspan="3">Populate</td><td colspan="3">Random Remove</td> </tr>
  <tr> 
    <td></td>
    <td></td><td>Duration</td><td>Avg. Duration</td> 
    <td></td><td>Duration</td><td>Avg. Duration</td> 
  </tr>

  <tr>
    <td>Array</td>
    <td><button type="button" onclick="arrPopulate();">GO</button></td>
    <td><span id="arr_populate_duration">0</span>ms</td>
    <td><span id="arr_populate_avg">0</span>ms</td>

    <td><button type="button" onclick="arrRandomRemove();">GO</button></td>
    <td><span id="arr_randomremove_duration">0</span>ms</td>
    <td><span id="arr_randomremove_avg">0</span>ms</td>
  </tr>

  <tr>
    <td>LinkedList</td>
    <td><button type="button" onclick="llPopulate();">GO</button></td>
    <td><span id="ll_populate_duration">0</span>ms</td>
    <td><span id="ll_populate_avg">0</span>ms</td>

    <td><button type="button" onclick="llRandomRemove();">GO</button></td>
    <td><span id="ll_randomremove_duration">0</span>ms</td>
    <td><span id="ll_randomremove_avg">0</span>ms</td>
  </tr>
</table>

</div>

</body>
</html>

